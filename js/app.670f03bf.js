(function(e){function t(t){for(var n,l,r=t[0],a=t[1],s=t[2],b=0,p=[];b<r.length;b++)l=r[b],Object.prototype.hasOwnProperty.call(o,l)&&o[l]&&p.push(o[l][0]),o[l]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n]);u&&u(t);while(p.length)p.shift()();return i.push.apply(i,s||[]),c()}function c(){for(var e,t=0;t<i.length;t++){for(var c=i[t],n=!0,r=1;r<c.length;r++){var a=c[r];0!==o[a]&&(n=!1)}n&&(i.splice(t--,1),e=l(l.s=c[0]))}return e}var n={},o={app:0},i=[];function l(t){if(n[t])return n[t].exports;var c=n[t]={i:t,l:!1,exports:{}};return e[t].call(c.exports,c,c.exports,l),c.l=!0,c.exports}l.m=e,l.c=n,l.d=function(e,t,c){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:c})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var c=Object.create(null);if(l.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)l.d(c,n,function(t){return e[t]}.bind(null,n));return c},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/torre-di-vetro/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],a=r.push.bind(r);r.push=t,r=r.slice();for(var s=0;s<r.length;s++)t(r[s]);var u=a;i.push([0,"chunk-vendors"]),c()})({0:function(e,t,c){e.exports=c("cd49")},"019c":function(e,t,c){e.exports=c.p+"img/exit.847afc9b.svg"},"04bf":function(e,t,c){},"30a6":function(e,t,c){"use strict";c("04bf")},cd49:function(e,t,c){"use strict";c.r(t);var n,o=c("7a23");c("14d9");(function(e){e[e["Empty"]=0]="Empty",e[e["Red"]=1]="Red",e[e["Green"]=2]="Green",e[e["Yellow"]=4]="Yellow",e[e["Blue"]=8]="Blue",e[e["Orange"]=16]="Orange",e[e["One"]=32]="One",e[e["Two"]=64]="Two",e[e["Three"]=128]="Three",e[e["Four"]=256]="Four",e[e["Five"]=512]="Five",e[e["Six"]=1024]="Six"})(n||(n={}));class i{constructor(){this.colors=[n.Red,n.Blue,n.Orange,n.Green,n.Yellow],this.values=[n.One,n.Two,n.Three,n.Four,n.Five,n.Six],this.generateBag=()=>{const e=[];for(let t=0;t<this.colors.length;t++)for(let c=0;c<10;c++){const c=this.colors[t],n=this.values[Math.floor(6*Math.random())];e.push(n|c)}return this.shuffle(e)},this.shuffleMap=e=>{const t=this.shuffle(this.colors),c=this.shuffle(this.values),o=[];for(let n=0;n<t.length;n++)o[this.colors[n]]=t[n];for(let n=0;n<c.length;n++)o[this.values[n]]=c[n];o[n.Empty]=n.Empty;for(let n=0;n<e.length;n++)e[n]=o[e[n]];return e},this.shuffle=e=>e.slice().sort(()=>Math.random()-.5)}}var l=c("019c"),r=c.n(l),a=c("f584"),s=c.n(a),u=c("ce60"),b=c.n(u);class p{constructor(){this.mode="pick",this.actions=[],this.canPick=e=>"pick"===this.mode&&!this.actions.some(t=>"pick"===t.mode&&t.public===e)}}class d{setCookie(e,t,c){const n=new Date;n.setTime(n.getTime()+24*c*60*60*1e3);const o="expires="+n.toUTCString();document.cookie=e+"="+t+";"+o+";path=/"}getCookie(e){const t=e+"=",c=document.cookie.split(";");for(let n=0;n<c.length;n++){let e=c[n];while(" "==e.charAt(0))e=e.substring(1);if(0==e.indexOf(t))return e.substring(t.length,e.length)}return""}}class h{constructor(e=n.Empty,t=!1){this.type=e,this.placed=t,this.active=!1}}var f=Object(o["h"])({__name:"dice",props:{dice:{}},setup(e){return(e,t)=>(Object(o["j"])(),Object(o["e"])("div",{class:Object(o["i"])(`dice ${e.dice.placed?"":"empty"} ${e.dice.active?"active":""} die-color-${e.dice.type%Object(o["m"])(n).One} die-value-${Math.floor(e.dice.type/Object(o["m"])(n).One)}`)},null,2))}});const j=f;var O=j;class m{markActive(e,t){const c=e.some(e=>e.placed);c?e.forEach((c,o)=>{if(c.active=!1,c.placed)return;const i=this.getNeighbors(e,o);i.every(e=>!e.placed)||(c.type&t)===c.type&&(i.some(e=>(e.type&t)>n.Empty)||(c.active=!0))}):e.forEach((c,o)=>{if((c.type&t)!==c.type)return;const i=this.getNeighbors(e,o);i.some(e=>(e.type&t)>n.Empty)||(c.active=o<5||o>=15||o%5<1||o%5>=4)})}getNeighbors(e,t){const c=[];return t-5>=0&&c.push(t-5),t-1>=0&&t%5!==0&&c.push(t-1),t+1<e.length&&t%5!==4&&c.push(t+1),t+5<e.length&&c.push(t+5),c.map(t=>e[t])}clearActive(e){e.forEach(e=>e.active=!1)}}class v{constructor(){this.public=[],this.private=[],this.central=[]}}const y={class:"main"},g={class:"toolbar"},k=Object(o["f"])("img",{alt:"exit",src:r.a},null,-1),w=[k],C=["onClick"],x={class:"dice-grid board"},E=["onClick"],M=["onClick"],T={key:0,class:"toolbar"},_=Object(o["f"])("img",{src:s.a,alt:"confirm"},null,-1),P=[_],S=Object(o["f"])("img",{src:b.a,alt:"undo"},null,-1),B=[S],A={key:0,class:"game-over"};var F=Object(o["h"])({__name:"grid",props:{map:{}},emits:["onEnd"],setup(e,{emit:t}){const c=e;let l=!1;const r=new i,a=new m,s=new d;let u=[];const b=Object(o["k"])(new v),f=Object(o["k"])(new p);let j=!1;const k=()=>{u=r.generateBag(),b.central=c.map.map(e=>new h(e)),b.private=u.splice(0,10).map(e=>new h(e,!0)),S(),l=!1,s.getCookie("show-tutorial")||(j=!0,s.setCookie("show-tutorial","true",7))},_=()=>t("onEnd"),S=()=>{b.public=u.splice(0,3).map(e=>new h(e,!0)),f.mode="pick",f.actions=[]},F=(e,t)=>{if(!f.canPick(t))return;const c=t?b.public[e]:b.private[e];c.placed&&(c.active=!0,f.actions.push({mode:"pick",public:t,number:e}),f.mode="place",a.markActive(b.central,c.type))},I=e=>{if(!b.central[e].active)return;const t=f.actions[f.actions.length-1];f.actions.push({mode:"place",number:e,public:t.public});const c=t.public?b.public[t.number]:b.private[t.number];b.central[e].placed=!0,b.central[e].type=c.type,c.active=!1,c.placed=!1,c.type=n.Empty,a.clearActive(b.central),f.mode="pick",b.central.every(e=>e.placed)&&(l=!0)},Y=()=>{f.mode="pick",a.clearActive(b.central);const e=f.actions.pop();if("pick"===e.mode){const t=e.public?b.public[e.number]:b.private[e.number];return void(t.active=!1)}const t=f.actions.pop(),n=t.public?b.public[t.number]:b.private[t.number];n.placed=!0,n.type=b.central[e.number].type,b.central[e.number].placed=!1,b.central[e.number].type=c.map[e.number]};return k(),(e,t)=>(Object(o["j"])(),Object(o["e"])(o["a"],null,[Object(o["f"])("div",y,[Object(o["f"])("div",g,[Object(o["f"])("button",{class:"btn-exit",onClick:t[0]||(t[0]=()=>_())},w)]),Object(o["f"])("div",{class:Object(o["i"])(["dice-grid",""+(f.canPick(!1)?"":"grid-disabled")])},[(Object(o["j"])(!0),Object(o["e"])(o["a"],null,Object(o["l"])(b.private,(e,t)=>(Object(o["j"])(),Object(o["e"])("div",{key:t,onClick:()=>F(t,!1)},[Object(o["g"])(O,{dice:e},null,8,["dice"])],8,C))),128))],2),Object(o["f"])("div",x,[(Object(o["j"])(!0),Object(o["e"])(o["a"],null,Object(o["l"])(b.central,(e,t)=>(Object(o["j"])(),Object(o["e"])("div",{key:t,onClick:()=>I(t)},[Object(o["g"])(O,{dice:e},null,8,["dice"])],8,E))),128))]),Object(o["f"])("div",{class:Object(o["i"])(["dice-grid",""+(f.canPick(!0)?"":"grid-disabled")])},[(Object(o["j"])(!0),Object(o["e"])(o["a"],null,Object(o["l"])(b.public,(e,t)=>(Object(o["j"])(),Object(o["e"])("div",{key:t,onClick:()=>F(t,!0)},[Object(o["g"])(O,{dice:e},null,8,["dice"])],8,M))),128))],2),Object(o["m"])(l)?Object(o["d"])("",!0):(Object(o["j"])(),Object(o["e"])("div",T,[4===f.actions.length?(Object(o["j"])(),Object(o["e"])("button",{key:0,class:"btn-yes",onClick:t[1]||(t[1]=()=>S())},P)):Object(o["d"])("",!0),f.actions.length>0?(Object(o["j"])(),Object(o["e"])("button",{key:1,class:"btn-no",onClick:t[2]||(t[2]=()=>Y())},B)):Object(o["d"])("",!0)]))]),Object(o["m"])(l)?(Object(o["j"])(),Object(o["e"])("div",A,"Board completed!")):Object(o["d"])("",!0)],64))}});const I=F;var Y=I;const $={key:0,class:"menu"},G=Object(o["f"])("h1",null,"Torre di Verto",-1),N=Object(o["f"])("h3",null,"Choose your difficulty level",-1),R=Object(o["f"])("hr",null,null,-1),J={key:0,class:"rules"},D=Object(o["f"])("div",null,"In the center you have a board plan with 20 slots",-1),H=Object(o["f"])("div",null,"Each round you pick one dice from the top pool and one from the bottom",-1),U=Object(o["f"])("div",null,"You can cancel your turn before both dice are placed",-1),V=Object(o["f"])("div",null,"Top pool is rolled once and will be unchanged since the game start",-1),q=Object(o["f"])("div",null,"Bottom pool changes every round",-1),z=Object(o["f"])("div",null,"If slot an a board has color, it means you can place only dice with the same color",-1),K=Object(o["f"])("div",null,"If slot an a board has dots, it means you can place only dice with the same amount of dots",-1),L=Object(o["f"])("div",null,"You cant place dice near another dice with the same color or with the same amount of dots",-1),Q=Object(o["f"])("div",null,"If you cant place any dice - use lose | If your board is full - you win",-1),W=[D,H,U,V,q,z,K,L,Q];var X=Object(o["h"])({__name:"app",setup(e){let t=Object(o["k"])({value:!1}),c=Object(o["k"])({dice:[]});const n=[[0,0,0,0,0,1,0,2,0,4,0,2,0,4,0,0,0,0,0,0],[0,32,0,64,0,0,0,0,0,0,1024,0,512,0,128,0,0,256,0,0]],l=[[0,256,0,1,1024,2,0,64,0,0,0,0,2,8,32,4,1,0,0,0],[32,64,0,0,0,1,2,256,32,0,0,1,2,1024,32,1024,128,0,0,0],[1,0,1024,0,0,0,32,512,0,64,128,1,2,4,0,0,0,256,128,2],[0,1,64,0,2,0,256,0,4,0,0,0,512,2,0,8,128,0,0,16],[16,8,0,0,32,1,0,512,0,256,128,0,2,0,1,64,0,0,8,16],[0,0,1,512,0,2,256,0,4,128,102,0,0,8,0,0,16,64,0,0],[1,1024,0,0,2,0,128,1,0,0,0,512,1024,64,0,0,256,0,32,16],[16,0,8,0,4,256,2,128,1,64,0,32,0,512,0,0,0,1024,0,0],[0,0,1,0,0,64,2,512,4,32,0,8,128,16,0,32,0,1024,0,256]],r=[[0,0,512,0,0,0,128,8,64,0,256,4,1,2,32,1024,64,16,128,256],[0,1,512,2,0,1,1024,256,512,2,64,2,128,1,32,0,0,32,0,0],[1,128,0,0,0,32,1,512,0,0,0,64,1,256,512,1024,0,128,1,0],[32,0,128,1,0,0,64,1,0,0,1024,1,0,256,0,1,512,64,0,32],[1,1024,0,0,128,512,1,128,0,0,0,64,1,32,0,0,32,512,1,256],[0,0,32,1,512,0,256,1,128,0,64,1,1024,0,0,1,512,64,0,256],[32,64,256,512,0,128,512,0,0,1,1024,0,0,1,2,256,0,1,2,32],[0,512,0,128,0,0,1,256,2,0,4,64,8,1024,16,32,0,512,0,64],[1,128,2,1024,4,0,8,64,16,256,0,0,8,512,0,32,0,0,8,1024]],a=e=>s(e[Math.floor(Math.random()*e.length)]),s=e=>c.dice=(new i).shuffleMap(e),u=()=>{c.dice=[]};return(e,i)=>(Object(o["j"])(),Object(o["e"])(o["a"],null,[Object(o["m"])(c).dice.length?Object(o["d"])("",!0):(Object(o["j"])(),Object(o["e"])("div",$,[G,N,Object(o["f"])("button",{onClick:i[0]||(i[0]=e=>a(n))},"Easy"),Object(o["f"])("button",{onClick:i[1]||(i[1]=e=>a(l))},"Medium"),Object(o["f"])("button",{onClick:i[2]||(i[2]=e=>a(r))},"Hard"),R,Object(o["f"])("button",{onClick:i[3]||(i[3]=e=>Object(o["m"])(t).value=!Object(o["m"])(t).value)},"Show rules"),Object(o["m"])(t).value?(Object(o["j"])(),Object(o["e"])("div",J,W)):Object(o["d"])("",!0)])),Object(o["m"])(c).dice.length?(Object(o["j"])(),Object(o["c"])(Y,{key:1,map:Object(o["m"])(c).dice,onOnEnd:u},null,8,["map"])):Object(o["d"])("",!0)],64))}});c("30a6");const Z=X;var ee=Z;Object(o["b"])(ee).mount("#app")},ce60:function(e,t,c){e.exports=c.p+"img/undo.313309a4.svg"},f584:function(e,t,c){e.exports=c.p+"img/confirm.84f13676.svg"}});
//# sourceMappingURL=app.670f03bf.js.map