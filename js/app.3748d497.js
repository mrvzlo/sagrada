(function(e){function t(t){for(var n,l,a=t[0],r=t[1],s=t[2],h=0,b=[];h<a.length;h++)l=a[h],Object.prototype.hasOwnProperty.call(o,l)&&o[l]&&b.push(o[l][0]),o[l]=0;for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n]);u&&u(t);while(b.length)b.shift()();return i.push.apply(i,s||[]),c()}function c(){for(var e,t=0;t<i.length;t++){for(var c=i[t],n=!0,a=1;a<c.length;a++){var r=c[a];0!==o[r]&&(n=!1)}n&&(i.splice(t--,1),e=l(l.s=c[0]))}return e}var n={},o={app:0},i=[];function l(t){if(n[t])return n[t].exports;var c=n[t]={i:t,l:!1,exports:{}};return e[t].call(c.exports,c,c.exports,l),c.l=!0,c.exports}l.m=e,l.c=n,l.d=function(e,t,c){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:c})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var c=Object.create(null);if(l.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)l.d(c,n,function(t){return e[t]}.bind(null,n));return c},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/torre-di-vetro/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],r=a.push.bind(a);a.push=t,a=a.slice();for(var s=0;s<a.length;s++)t(a[s]);var u=r;i.push([0,"chunk-vendors"]),c()})({0:function(e,t,c){e.exports=c("cd49")},"019c":function(e,t,c){e.exports=c.p+"img/exit.847afc9b.svg"},"49f8":function(e,t,c){var n={"./en.json":"edd4","./ru.json":"7704"};function o(e){var t=i(e);return c(t)}function i(e){if(!c.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}o.keys=function(){return Object.keys(n)},o.resolve=i,e.exports=o,o.id="49f8"},"6ae2":function(e,t,c){},7704:function(e){e.exports=JSON.parse('{"title":"Torre di Verto","easy":"Легкий","medium":"Средний","hard":"Сложный","choose":"Выберите уровень сложности","rules-btn":"Правила игры"}')},a849:function(e,t,c){"use strict";c("6ae2")},cd49:function(e,t,c){"use strict";c.r(t);var n,o=c("7a23"),i=c("019c"),l=c.n(i);c("14d9");(function(e){e[e["Empty"]=0]="Empty",e[e["Red"]=1]="Red",e[e["Green"]=2]="Green",e[e["Yellow"]=4]="Yellow",e[e["Blue"]=8]="Blue",e[e["Orange"]=16]="Orange",e[e["One"]=32]="One",e[e["Two"]=64]="Two",e[e["Three"]=128]="Three",e[e["Four"]=256]="Four",e[e["Five"]=512]="Five",e[e["Six"]=1024]="Six"})(n||(n={}));class a{constructor(){this.DiceCount=8,this.colors=[n.Red,n.Blue,n.Orange,n.Green,n.Yellow],this.values=[n.One,n.Two,n.Three,n.Four,n.Five,n.Six],this.generateBag=()=>{const e=[];for(let t=0;t<this.colors.length;t++)for(let c=0;c<this.DiceCount;c++){const c=this.colors[t],n=this.values[Math.floor(6*Math.random())];e.push(n|c)}return this.shuffle(e)},this.shuffleMap=e=>{const t=this.shuffle(this.colors),c=this.shuffle(this.values),o=[];for(let n=0;n<t.length;n++)o[this.colors[n]]=t[n];for(let n=0;n<c.length;n++)o[this.values[n]]=c[n];o[n.Empty]=n.Empty;for(let n=0;n<e.length;n++)e[n]=o[e[n]];return e},this.shuffle=e=>e.slice().sort(()=>Math.random()-.5)}}var r=c("f584"),s=c.n(r),u=c("ce60"),h=c.n(u);class b{constructor(){this.mode="pick",this.actions=[],this.canPick=e=>"pick"===this.mode&&!this.actions.some(t=>"pick"===t.mode&&t.public===e)}}class d{setCookie(e,t,c){const n=new Date;n.setTime(n.getTime()+24*c*60*60*1e3);const o="expires="+n.toUTCString();document.cookie=e+"="+t+";"+o+";path=/"}getCookie(e){const t=e+"=",c=document.cookie.split(";");for(let n=0;n<c.length;n++){let e=c[n];while(" "==e.charAt(0))e=e.substring(1);if(0==e.indexOf(t))return e.substring(t.length,e.length)}return""}}class p{constructor(e=n.Empty,t=!1){this.type=e,this.placed=t,this.active=!1}}var O=Object(o["j"])({__name:"dice",props:{dice:{}},setup(e){return(e,t)=>(Object(o["t"])(),Object(o["g"])("div",{class:Object(o["p"])(`dice ${e.dice.placed?"":"empty"} ${e.dice.active?"active":""} die-color-${e.dice.type%Object(o["z"])(n).One} die-value-${Math.floor(e.dice.type/Object(o["z"])(n).One)}`)},null,2))}});const j=O;var f=j;class g{constructor(){this.cheatMode=!1}markActive(e,t){const c=e.some(e=>e.placed);c?e.forEach((c,o)=>{if(c.active=this.cheatMode,c.placed)return;const i=this.getOrthogonalNeighbors(e,o),l=this.getDiagonalNeighbors(e,o);i.every(e=>!e.placed)&&l.every(e=>!e.placed)||(c.type&t)===c.type&&(i.some(e=>(e.type&t)>n.Empty)||(c.active=!0))}):e.forEach((c,o)=>{if((c.type&t)!==c.type)return;const i=this.getOrthogonalNeighbors(e,o);i.some(e=>(e.type&t)>n.Empty)||(c.active=o<5||o>=15||o%5<1||o%5>=4)})}getOrthogonalNeighbors(e,t){const c=[];return t-5>=0&&c.push(t-5),t-1>=0&&t%5!==0&&c.push(t-1),t+1<e.length&&t%5!==4&&c.push(t+1),t+5<e.length&&c.push(t+5),c.map(t=>e[t])}getDiagonalNeighbors(e,t){const c=[];return t-6>=0&&t%5!==0&&c.push(t-6),t-4>=0&&t%5!==4&&c.push(t-4),t+4<e.length&&t%5!==0&&c.push(t+4),t+6<e.length&&t%5!==4&&c.push(t+6),c.map(t=>e[t])}clearActive(e){e.forEach(e=>e.active=!1)}}class m{constructor(){this.public=[],this.private=[],this.central=[]}}const v=["onMousedown"],y={class:"dice-grid board"},k=["onMousedown"],w=["onMousedown"],x=Object(o["h"])("img",{src:s.a,alt:"confirm"},null,-1),M=[x],C=Object(o["h"])("img",{src:h.a,alt:"undo"},null,-1),E=[C],N=Object(o["h"])("div",null,"Board completed!",-1),T=Object(o["h"])("button",{class:"btn-yes"},[Object(o["h"])("img",{src:s.a,alt:"confirm"})],-1),_=[N,T];var L=Object(o["j"])({__name:"grid",props:{map:{}},emits:["onEnd"],setup(e,{emit:t}){const c=e;let i=!1;const l=new a,r=new g,s=new d;let u=[];const h=Object(o["u"])(new m),O=Object(o["u"])(new b);let j=!1;const x=()=>{u=l.generateBag(),h.central=c.map.map(e=>new p(e)),h.private=u.splice(0,10).map(e=>new p(e,!0)),C(),i=!1,s.getCookie("show-tutorial")||(j=!0,s.setCookie("show-tutorial","true",7))},C=()=>{h.public=u.splice(0,3).map(e=>new p(e,!0)),O.mode="pick",O.actions=[]},N=(e,t)=>{const c=O.canPick(t);if(!c){const c=O.actions[O.actions.length-1];return void(c.number===e&&c.public===t&&L())}const n=t?h.public[e]:h.private[e];n.placed&&(n.active=!0,O.actions.push({mode:"pick",public:t,number:e}),O.mode="place",r.markActive(h.central,n.type))},T=e=>{if(!h.central[e].active)return;const t=O.actions[O.actions.length-1];O.actions.push({mode:"place",number:e,public:t.public});const c=t.public?h.public[t.number]:h.private[t.number];h.central[e].placed=!0,h.central[e].type=c.type,c.active=!1,c.placed=!1,c.type=n.Empty,r.clearActive(h.central),O.mode="pick",h.central.every(e=>e.placed)?i=!0:4===O.actions.length&&C()},L=()=>{O.mode="pick",r.clearActive(h.central);const e=O.actions.pop();if("pick"===e.mode){const t=e.public?h.public[e.number]:h.private[e.number];return void(t.active=!1)}const t=O.actions.pop(),n=t.public?h.public[t.number]:h.private[t.number];n.placed=!0,n.type=h.central[e.number].type,h.central[e.number].placed=!1,h.central[e.number].type=c.map[e.number]},z=()=>t("onEnd");return x(),(e,t)=>(Object(o["t"])(),Object(o["g"])(o["a"],null,[Object(o["h"])("div",{class:Object(o["p"])(["dice-grid",""+(O.canPick(!1)?"":"grid-disabled")])},[(Object(o["t"])(!0),Object(o["g"])(o["a"],null,Object(o["w"])(h.private,(e,t)=>(Object(o["t"])(),Object(o["g"])("div",{key:t,onMousedown:()=>N(t,!1)},[Object(o["i"])(f,{dice:e},null,8,["dice"])],40,v))),128))],2),Object(o["h"])("div",y,[(Object(o["t"])(!0),Object(o["g"])(o["a"],null,Object(o["w"])(h.central,(e,t)=>(Object(o["t"])(),Object(o["g"])("div",{key:t,onMousedown:()=>T(t)},[Object(o["i"])(f,{dice:e},null,8,["dice"])],40,k))),128))]),Object(o["h"])("div",{class:Object(o["p"])(["dice-grid",""+(O.canPick(!0)?"":"grid-disabled")])},[(Object(o["t"])(!0),Object(o["g"])(o["a"],null,Object(o["w"])(h.public,(e,t)=>(Object(o["t"])(),Object(o["g"])("div",{key:t,onMousedown:()=>N(t,!0)},[Object(o["i"])(f,{dice:e},null,8,["dice"])],40,w))),128))],2),Object(o["h"])("div",{class:Object(o["p"])(["toolbar",Object(o["z"])(i)?"hidden":""])},[4===O.actions.length?(Object(o["t"])(),Object(o["g"])("button",{key:0,class:"btn-yes",onClick:t[0]||(t[0]=()=>C())},M)):Object(o["f"])("",!0),O.actions.length>0?(Object(o["t"])(),Object(o["g"])("button",{key:1,class:"btn-no",onClick:t[1]||(t[1]=()=>L())},E)):Object(o["f"])("",!0)],2),Object(o["z"])(i)?(Object(o["t"])(),Object(o["g"])("div",{key:0,class:"game-over",onClick:t[2]||(t[2]=()=>z())},_)):Object(o["f"])("",!0)],64))}});const z=L;var S=z,P=c("47e2");function $(){const e=c("49f8"),t={};return e.keys().forEach(c=>{const n=c.match(/([A-Za-z0-9-_]+)\./i);if(!n||n.length<2)return;const o=n[1];t[o]=e(c)}),t}var I=Object(P["a"])({legacy:!1,globalInjection:!0,locale:"en",fallbackLocale:"en",messages:$()});class A{constructor(){this.locales=["ru","en"],this.nativeNames=["RU","EN"],this.current="",this.key="locale",this.cookieManager=new d;const e=this.cookieManager.getCookie(this.key);this.setLocale(e)}toggleLocale(){this.setLocale(this.nextLocale())}nextLocale(){return this.locales[this.nextLocaleId()]}nextLocaleId(){const e=this.locales.indexOf(I.global.locale.value);return(e+1)%this.locales.length}nextLocaleNativeName(){return this.nativeNames[this.nextLocaleId()]}setLocale(e){this.current=e,I.global.locale.value=e,this.cookieManager.setCookie(this.key,e,14)}}const B={class:"main"},D={class:"toolbar"},F=Object(o["h"])("img",{alt:"exit",src:l.a},null,-1),Y=[F],J={key:1,class:"menu"},R=Object(o["h"])("hr",null,null,-1),U={key:0,class:"rules"},G=Object(o["h"])("div",null,"In the center you have a board plan with 20 slots",-1),V=Object(o["h"])("div",null,"Each round you pick one dice from the top pool and one from the bottom",-1),H=Object(o["h"])("div",null,"You can cancel your turn before both dice are placed",-1),Z=Object(o["h"])("div",null,"Top pool is rolled once and will be unchanged since the game start",-1),q=Object(o["h"])("div",null,"Bottom pool changes every round",-1),K=Object(o["h"])("div",null,"If slot an a board has color, it means you can place only dice with the same color",-1),Q=Object(o["h"])("div",null,"If slot an a board has dots, it means you can place only dice with the same amount of dots",-1),W=Object(o["h"])("div",null,"You cant place dice near another dice with the same color or with the same amount of dots",-1),X=Object(o["h"])("div",null,"If you cant place any dice - use lose | If your board is full - you win",-1),ee=[G,V,H,Z,q,K,Q,W,X];var te=Object(o["j"])({__name:"app",setup(e){let t=Object(o["u"])({value:!1}),c=Object(o["u"])({dice:[]});const n=new A,i=[[0,0,0,0,0,1,0,2,0,4,0,2,0,4,0,0,0,0,0,0],[0,32,0,64,0,0,0,0,0,0,1024,0,512,0,128,0,0,256,0,0]],l=[[0,256,0,1,1024,2,0,64,0,0,0,0,2,8,32,4,1,0,0,0],[32,64,0,0,0,1,2,256,32,0,0,1,2,1024,32,1024,128,0,0,0],[1,0,1024,0,0,0,32,512,0,64,128,1,2,4,0,0,0,256,128,2],[0,1,64,0,2,0,256,0,4,0,0,0,512,2,0,8,128,0,0,16],[16,8,0,0,32,1,0,512,0,256,128,0,2,0,1,64,0,0,8,16],[0,0,1,512,0,2,256,0,4,128,102,0,0,8,0,0,16,64,0,0],[1,1024,0,0,2,0,128,1,0,0,0,512,1024,64,0,0,256,0,32,16],[16,0,8,0,4,256,2,128,1,64,0,32,0,512,0,0,0,1024,0,0],[0,0,1,0,0,64,2,512,4,32,0,8,128,16,0,32,0,1024,0,256]],r=[[0,0,512,0,0,0,128,8,64,0,256,4,1,2,32,1024,64,16,128,256],[0,1,512,2,0,1,1024,256,512,2,64,2,128,1,32,0,0,32,0,0],[1,128,0,0,0,32,1,512,0,0,0,64,1,256,512,1024,0,128,1,0],[32,0,128,1,0,0,64,1,0,0,1024,1,0,256,0,1,512,64,0,32],[1,1024,0,0,128,512,1,128,0,0,0,64,1,32,0,0,32,512,1,256],[0,0,32,1,512,0,256,1,128,0,64,1,1024,0,0,1,512,64,0,256],[32,64,256,512,0,128,512,0,0,1,1024,0,0,1,2,256,0,1,2,32],[0,512,0,128,0,0,1,256,2,0,4,64,8,1024,16,32,0,512,0,64],[1,128,2,1024,4,0,8,64,16,256,0,0,8,512,0,32,0,0,8,1024]],s=e=>u(e[Math.floor(Math.random()*e.length)]),u=e=>c.dice=(new a).shuffleMap(e),h=()=>c.dice=[],b=()=>n.toggleLocale(),d=()=>n.nextLocaleNativeName();return(e,n)=>(Object(o["t"])(),Object(o["g"])("div",B,[Object(o["h"])("div",D,[Object(o["h"])("button",{class:"btn-lang",onClick:n[0]||(n[0]=()=>b())},Object(o["y"])(d()),1),Object(o["z"])(c).dice.length?(Object(o["t"])(),Object(o["g"])("button",{key:0,class:"btn-exit",onClick:n[1]||(n[1]=()=>h())},Y)):Object(o["f"])("",!0)]),Object(o["z"])(c).dice.length?(Object(o["t"])(),Object(o["e"])(S,{key:0,map:Object(o["z"])(c).dice,onOnEnd:n[2]||(n[2]=()=>h())},null,8,["map"])):Object(o["f"])("",!0),Object(o["z"])(c).dice.length?Object(o["f"])("",!0):(Object(o["t"])(),Object(o["g"])("div",J,[Object(o["h"])("h1",null,Object(o["y"])(e.$t("title")),1),Object(o["h"])("h3",null,Object(o["y"])(e.$t("choose")),1),Object(o["h"])("button",{onClick:n[3]||(n[3]=e=>s(i))},Object(o["y"])(e.$t("easy")),1),Object(o["h"])("button",{onClick:n[4]||(n[4]=e=>s(l))},Object(o["y"])(e.$t("medium")),1),Object(o["h"])("button",{onClick:n[5]||(n[5]=e=>s(r))},Object(o["y"])(e.$t("hard")),1),R,Object(o["h"])("button",{onClick:n[6]||(n[6]=e=>Object(o["z"])(t).value=!Object(o["z"])(t).value)},Object(o["y"])(e.$t("rules-btn")),1),Object(o["z"])(t).value?(Object(o["t"])(),Object(o["g"])("div",U,ee)):Object(o["f"])("",!0)]))]))}});c("a849");const ce=te;var ne=ce;Object(o["d"])(ne).use(I).mount("#app")},ce60:function(e,t,c){e.exports=c.p+"img/undo.313309a4.svg"},edd4:function(e){e.exports=JSON.parse('{"title":"Torre di Verto","choose":"Choose your difficulty level","easy":"Easy","medium":"Medium","hard":"Hard","rules-btn":"Show rules"}')},f584:function(e,t,c){e.exports=c.p+"img/confirm.84f13676.svg"}});
//# sourceMappingURL=app.3748d497.js.map